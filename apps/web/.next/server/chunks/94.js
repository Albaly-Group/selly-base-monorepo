exports.id=94,exports.ids=[94],exports.modules={37413:(a,b,c)=>{"use strict";async function d(a){if(!a||!a.startsWith("Bearer "))return null;let b=a.substring(7);try{if("demo-user-token"===b)return{id:"user-1",email:"user@selly.com",name:"Demo User",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),roles:[{id:"role-user",name:"user",description:"Regular user role",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),permissions:[{id:"perm-1",key:"company-lists:read-own",description:"Read own company lists",created_at:"",updated_at:""},{id:"perm-2",key:"company-lists:create",description:"Create company lists",created_at:"",updated_at:""},{id:"perm-3",key:"company-lists:update-own",description:"Update own company lists",created_at:"",updated_at:""},{id:"perm-4",key:"company-lists:delete-own",description:"Delete own company lists",created_at:"",updated_at:""}]}]};if("demo-admin-token"===b)return{id:"admin-1",email:"admin@selly.com",name:"Admin User",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),roles:[{id:"role-admin",name:"admin",description:"Administrator role",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),permissions:[{id:"perm-admin",key:"*",description:"Full access to all resources",created_at:"",updated_at:""}]}]};return null}catch(a){return console.error("Token validation error:",a),null}}function e(a,b){if(!a.roles)return!1;for(let c of a.roles)if(c.permissions)for(let a of c.permissions){if("*"===a.key||a.key===b)return!0;if(a.key.endsWith(":*")){let c=a.key.slice(0,-1);if(b.startsWith(c))return!0}}return!1}function f(a,b){return!!(b.ownerUserId===a.id||e(a,"*")||e(a,"company-lists:*")||"public"===b.visibility&&e(a,"company-lists:read-public")||"org"===b.visibility&&e(a,"company-lists:read-org"))}c.d(b,{_m:()=>e,fE:()=>f,g3:()=>d})},80408:()=>{},85711:(a,b,c)=>{"use strict";c.d(b,{E:()=>g});let d=[{id:"1",companyNameEn:"ABC Manufacturing Co., Ltd.",industrialName:"Manufacturing",province:"Bangkok",contactPersons:[{name:"John Smith",phone:"+66-2-123-4567",email:"john@abc-mfg.com"}],verificationStatus:"Active",dataCompleteness:95,lastUpdated:"2024-12-08",createdBy:"System Import",registeredNo:"0105564111698",companySize:"L"},{id:"2",companyNameEn:"Bangkok Logistics Solutions Ltd.",industrialName:"Logistics",province:"Bangkok",contactPersons:[{name:"Sarah Johnson",phone:"+66-2-987-6543",email:"sarah@bkk-logistics.com"}],verificationStatus:"Active",dataCompleteness:88,lastUpdated:"2024-12-07",createdBy:"User Import",registeredNo:"0105564222789",companySize:"M"},{id:"3",companyNameEn:"Chiang Mai Automotive Parts Co.",industrialName:"Automotive",province:"Chiang Mai",contactPersons:[{name:"Michael Chen",phone:"+66-53-456-7890"}],verificationStatus:"Needs Verification",dataCompleteness:65,lastUpdated:"2024-12-05",createdBy:"Staff Entry",registeredNo:"0105564333890",companySize:"S"},{id:"4",companyNameEn:"Phuket Tourism Services Ltd.",industrialName:"Tourism",province:"Phuket",contactPersons:[{name:"Lisa Wong",email:"lisa@phuket-tourism.com"}],verificationStatus:"Invalid",dataCompleteness:45,lastUpdated:"2024-11-28",createdBy:"System Import",registeredNo:"0105564444901",companySize:"M"},{id:"5",companyNameEn:"Northeast Agriculture Co-op",industrialName:"Agriculture",province:"Khon Kaen",contactPersons:[{name:"Somchai Prasert",phone:"+66-43-123-4567",email:"somchai@ne-agri.com"}],verificationStatus:"Active",dataCompleteness:92,lastUpdated:"2024-12-06",createdBy:"User Import",registeredNo:"0105564555012",companySize:"L"}],e=[{id:"1",name:"Bangkok Logistics Leads",companyIds:["1","2"],createdAt:"2024-12-01",status:"Active",owner:"user@example.com"},{id:"2",name:"Manufacturing Prospects",companyIds:["1","5"],createdAt:"2024-11-28",status:"Active",owner:"user@example.com"}];var f=c(37413);class g{constructor(a){this.user=a}async listCompanyLists(a){let b=e.map(a=>({id:a.id,name:a.name,description:`Mock list created on ${a.createdAt}`,ownerUserId:"user@example.com"===a.owner?"user-1":"admin-1",visibility:"private",isShared:!1,itemCount:a.companyIds.length,createdAt:new Date(a.createdAt).toISOString(),updatedAt:new Date(a.createdAt).toISOString()}));if("mine"===a.scope?b=b.filter(a=>a.ownerUserId===this.user.id):"shared"===a.scope?b=b.filter(a=>a.isShared&&(0,f.fE)(this.user,a)):"org"===a.scope&&(b=b.filter(a=>"org"===a.visibility&&(0,f.fE)(this.user,a))),a.q){let c=a.q.toLowerCase();b=b.filter(a=>a.name.toLowerCase().includes(c)||a.description&&a.description.toLowerCase().includes(c))}let c=b.length,d=(a.page-1)*a.limit;return{items:b.slice(d,d+a.limit),page:a.page,limit:a.limit,total:c}}async createCompanyList(a){let b=new Date().toISOString();return{id:`list-${Math.random().toString(36).substring(7)}`,name:a.name,description:a.description||null,ownerUserId:this.user.id,visibility:a.visibility||"private",isShared:a.isShared||!1,itemCount:0,createdAt:b,updatedAt:b}}async getCompanyList(a){let b=e.find(b=>b.id===a);if(!b)return null;let c={id:b.id,name:b.name,description:`Mock list created on ${b.createdAt}`,ownerUserId:"user@example.com"===b.owner?"user-1":"admin-1",visibility:"private",isShared:!1,itemCount:b.companyIds.length,createdAt:new Date(b.createdAt).toISOString(),updatedAt:new Date(b.createdAt).toISOString()};return(0,f.fE)(this.user,c)?c:null}async updateCompanyList(a,b){let c=await this.getCompanyList(a);if(!c)return null;if(c.ownerUserId!==this.user.id&&!(0,f._m)(this.user,"company-lists:update-any"))throw Error("FORBIDDEN");return{...c,name:b.name??c.name,description:b.description??c.description,visibility:b.visibility??c.visibility,isShared:b.isShared??c.isShared,updatedAt:new Date().toISOString()}}async deleteCompanyList(a){let b=await this.getCompanyList(a);if(!b)return!1;if(b.ownerUserId!==this.user.id&&!(0,f._m)(this.user,"company-lists:delete-any"))throw Error("FORBIDDEN");return!0}async listCompanyListItems(a,b){if(!await this.getCompanyList(a))throw Error("LIST_NOT_FOUND");let c=e.find(b=>b.id===a);if(!c)throw Error("LIST_NOT_FOUND");let f=d.filter(a=>c.companyIds.includes(a.id));if(b.q){let a=b.q.toLowerCase();f=f.filter(b=>b.companyNameEn.toLowerCase().includes(a))}b["filters[province]"]&&(f=f.filter(a=>a.province===b["filters[province]"]));let g=f.map((b,c)=>({itemId:`item-${b.id}-${a}`,note:null,position:c,addedAt:new Date().toISOString(),addedByUserId:this.user.id,company:{companyId:b.id,name:b.companyNameEn,registrationNo:b.registeredNo||null,province:b.province,country:"TH",website:null,headTags:[{key:"industry",name:b.industrialName}],classifications:[{tsic:"99999",titleEn:b.industrialName}],contactsCount:b.contactPersons.length}}));"name"===b.sortBy&&g.sort((a,c)=>{let d=a.company.name.localeCompare(c.company.name);return"desc"===b.sortDir?-d:d});let h=b.limit||25;return{items:g.slice(0,h),nextCursor:g.length>h?`cursor-${h}`:null}}async addCompaniesToList(a,b){let c=await this.getCompanyList(a);if(!c)throw Error("LIST_NOT_FOUND");if(c.ownerUserId!==this.user.id&&!(0,f._m)(this.user,"company-lists:modify-any"))throw Error("FORBIDDEN");let g=[],h=[];for(let c of b.companyIds){if(!d.find(a=>a.id===c)){h.push({companyId:c,reason:"NOT_FOUND"});continue}let b=e.find(b=>b.id===a);if(b?.companyIds.includes(c)){h.push({companyId:c,reason:"DUPLICATE"});continue}g.push(c)}return{listId:a,added:g,skipped:h}}async removeCompaniesFromList(a,b){let c=await this.getCompanyList(a);if(!c)throw Error("LIST_NOT_FOUND");if(c.ownerUserId!==this.user.id&&!(0,f._m)(this.user,"company-lists:modify-any"))throw Error("FORBIDDEN");let d=[],g=[];for(let c of b.companyIds){let b=e.find(b=>b.id===a);b?.companyIds.includes(c)?d.push(c):g.push(c)}return{listId:a,removed:d,missing:g}}}},87032:()=>{}};