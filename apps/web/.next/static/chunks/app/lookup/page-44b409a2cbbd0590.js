(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{41245:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(54568),n=a(7620),r=a(70463),l=a(65202),i=a(12598),c=a(84244),o=a(92779),d=a(6845);function m(e){let{searchTerm:s,onSearchChange:a,onClearSearch:n,onSearchSubmit:r,onOpenSmartFiltering:m}=e;return(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),r&&r()},children:(0,t.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Companies"}),(0,t.jsxs)("div",{className:"relative flex",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(o.p,{id:"search",type:"text",placeholder:"Search by company name, registered number, or keyword...",value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&r&&r()},className:"pl-10 pr-10"}),s&&(0,t.jsx)(d.$,{type:"button",variant:"ghost",size:"sm",onClick:n,className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(d.$,{type:"submit",className:"ml-2 px-3",disabled:!s.trim(),children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})]})]}),m&&(0,t.jsxs)(d.$,{type:"button",variant:"outline",onClick:m,className:"flex items-center gap-2 mb-0",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),"Smart Filtering"]})]})}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Search supports:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,t.jsx)("li",{children:'Company Name (EN) - e.g., "ABC Manufacturing Co., Ltd."'}),(0,t.jsx)("li",{children:'Registered No. - e.g., "0105564111698"'}),(0,t.jsx)("li",{children:'Keywords - e.g., "Shoe", "Logistics"'})]})]})]})}var x=a(68350),h=a(51598),p=a(90551),u=a(54366),j=a(92068);let g=(0,j.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),v=(0,j.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var N=a(38391);function y(e){let{companies:s,selectedCompanies:a,onSelectCompany:r,onSelectAll:l,onViewCompany:i,showLeadScores:c=!1,leadScores:o={},sortable:m=!1}=e,[j,y]=(0,n.useState)("score"),[b,f]=(0,n.useState)("desc"),C=s.length>0&&a.length===s.length,w=a.length>0&&a.length<s.length,S=e=>{m&&(j===e?f("asc"===b?"desc":"asc"):(y(e),f("score"===e?"desc":"asc")))},k=m?[...s].sort((e,s)=>{let a,t;switch(j){case"name":a=e.companyNameEn.toLowerCase(),t=s.companyNameEn.toLowerCase();break;case"industry":a=e.industrialName.toLowerCase(),t=s.industrialName.toLowerCase();break;case"province":a=e.province.toLowerCase(),t=s.province.toLowerCase();break;case"status":a=e.verificationStatus.toLowerCase(),t=s.verificationStatus.toLowerCase();break;case"completeness":a=e.dataCompleteness,t=s.dataCompleteness;break;case"score":var n,r;a=(null==(n=o[e.id])?void 0:n.normalizedScore)||0,t=(null==(r=o[s.id])?void 0:r.normalizedScore)||0;break;default:return 0}return a<t?"asc"===b?-1:1:a>t?"asc"===b?1:-1:0}):s,A=e=>m&&j===e?"asc"===b?(0,t.jsx)(g,{className:"h-4 w-4 ml-1"}):(0,t.jsx)(v,{className:"h-4 w-4 ml-1"}):(0,t.jsx)(u.A,{className:"h-4 w-4 ml-1 text-gray-300"});return(0,t.jsx)("div",{className:"bg-white rounded-lg border",children:(0,t.jsxs)(p.XI,{children:[(0,t.jsx)(p.A0,{children:(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nd,{className:"w-12",children:(0,t.jsx)(h.S,{checked:C,onCheckedChange:l,ref:e=>{e&&(e.indeterminate=w)}})}),(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("name"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Company Name",A("name")]})}),(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("industry"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Industry",A("industry")]})}),(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("province"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Province",A("province")]})}),(0,t.jsx)(p.nd,{children:"Contact Person"}),(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("status"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Status",A("status")]})}),(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("completeness"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Data Completeness",A("completeness")]})}),c&&(0,t.jsx)(p.nd,{className:m?"cursor-pointer hover:bg-gray-50":"",onClick:()=>S("score"),children:(0,t.jsxs)("div",{className:"flex items-center",children:["Weighted Score",A("score")]})}),(0,t.jsx)(p.nd,{className:"w-24",children:"Actions"})]})}),(0,t.jsx)(p.BF,{children:0===k.length?(0,t.jsx)(p.Hj,{children:(0,t.jsx)(p.nA,{colSpan:c?9:8,className:"text-center py-12 text-gray-500",children:"No companies match your search criteria"})}):k.map(e=>{var s;return(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nA,{children:(0,t.jsx)(h.S,{checked:a.includes(e.id),onCheckedChange:s=>r(e.id,s)})}),(0,t.jsx)(p.nA,{className:"font-medium",children:(0,t.jsxs)("button",{className:"text-left hover:text-blue-600 transition-colors",onClick:()=>null==i?void 0:i(e),children:[(0,t.jsx)("div",{className:"font-semibold hover:underline cursor-pointer",children:e.companyNameEn}),e.registeredNo&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Reg: ",e.registeredNo]})]})}),(0,t.jsx)(p.nA,{children:e.industrialName}),(0,t.jsx)(p.nA,{children:e.province}),(0,t.jsx)(p.nA,{children:e.contactPersons.length>0?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.contactPersons[0].name}),e.contactPersons[0].phone&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.contactPersons[0].phone}),e.contactPersons[0].email&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.contactPersons[0].email})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"No contact info"})}),(0,t.jsx)(p.nA,{children:(0,t.jsx)(x.E,{className:(e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"Needs Verification":return"bg-yellow-100 text-yellow-800";case"Invalid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.verificationStatus),children:e.verificationStatus})}),(0,t.jsx)(p.nA,{children:(0,t.jsxs)("span",{className:"font-medium ".concat((s=e.dataCompleteness)>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600"),children:[e.dataCompleteness,"%"]})}),c&&(0,t.jsx)(p.nA,{children:o[e.id]?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-semibold text-lg",children:[o[e.id].normalizedScore,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[o[e.id].score,"/",o[e.id].maxPossibleScore]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)(p.nA,{children:(0,t.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>null==i?void 0:i(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})})]},e.id)})})]})})}var b=a(25359),f=a(13824),C=a(88161),w=a(766),S=a(62063),k=a(62737),A=a(5239);let L=(0,S.oC)(["user","admin"])(function(){var e;let[s,a]=(0,n.useState)(""),[i,o]=(0,n.useState)({}),[d,x]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[u,j]=(0,n.useState)(!1),[g,v]=(0,n.useState)("all"),[N,S]=(0,n.useState)(null),[L,E]=(0,n.useState)(!1),[P,F]=(0,n.useState)(!1),[O,U]=(0,n.useState)(!1),{filteredCompanies:_,leadScores:z}=(0,n.useMemo)(()=>{if(O&&s.trim())return{filteredCompanies:(0,w.mi)(w._J,s),leadScores:{}};if(P){let e=(0,w.pz)(w._J,i),s=e.map(e=>e.company),a={};return e.forEach(e=>{a[e.company.id]=e.score}),{filteredCompanies:s,leadScores:a}}return{filteredCompanies:[],leadScores:{}}},[s,i,P,O]),M=()=>{o({}),F(!1),U(!1),a(""),x([])},R=()=>{M()},D=O||P;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(r.V,{}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Company Lookup"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Search and discover companies in our database"})]}),(0,t.jsxs)(k.tU,{value:g,onValueChange:v,className:"space-y-6",children:[(0,t.jsxs)(k.j7,{children:[(0,t.jsx)(k.Xi,{value:"all",children:"All Companies"}),(0,t.jsx)(k.Xi,{value:"lists",children:"My Lists"})]}),(0,t.jsxs)(k.av,{value:"all",className:"space-y-6",children:[(0,t.jsx)(m,{searchTerm:s,onSearchChange:e=>{a(e),e.trim()||U(!1)},onClearSearch:()=>{a(""),U(!1)},onSearchSubmit:()=>{s.trim()&&(U(!0),F(!1),x([]))},onOpenSmartFiltering:()=>j(!0)}),D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[O&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg px-4 py-2 flex items-center gap-2",children:[(0,t.jsx)(l.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)("span",{className:"text-sm text-green-800 font-medium",children:['Search: "',s,'"']}),(0,t.jsx)("button",{onClick:R,className:"text-green-600 hover:text-green-800 text-sm underline ml-2",children:"Clear"})]}),P&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2 flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm text-blue-800 font-medium",children:"Smart Filtering Applied"}),(0,t.jsx)("button",{onClick:R,className:"text-blue-600 hover:text-blue-800 text-sm underline ml-2",children:"Clear All"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{d.length>0&&p(!0)},disabled:0===d.length,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/90",children:["Add to List (",d.length,")"]}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([[["Company Name","Industry","Province","Contact Person","Phone","Email","Status","Data Completeness","Last Updated"],..._.filter(e=>d.includes(e.id)).map(e=>{var s,a,t;return[e.companyNameEn,e.industrialName,e.province,(null==(s=e.contactPersons[0])?void 0:s.name)||"",(null==(a=e.contactPersons[0])?void 0:a.phone)||"",(null==(t=e.contactPersons[0])?void 0:t.email)||"",e.verificationStatus,"".concat(e.dataCompleteness,"%"),e.lastUpdated]})].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="selly-base-export-".concat(new Date().toISOString().split("T")[0],".csv"),a.click(),URL.revokeObjectURL(s)},disabled:0===d.length,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["Export (",d.length,")"]})]})]}),(0,t.jsx)(y,{companies:_,selectedCompanies:d,onSelectCompany:(e,s)=>{s?x(s=>[...s,e]):x(s=>s.filter(s=>s!==e))},onSelectAll:e=>{e?x(_.map(e=>e.id)):x([])},onViewCompany:e=>{S(e),E(!0)},showLeadScores:P,leadScores:z,sortable:!0}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 flex justify-between",children:[O?(0,t.jsxs)("span",{children:["Showing ",_.length,' companies matching "',s,'"']}):(0,t.jsxs)("span",{children:["Showing ",_.length," companies with weighted lead scores"]}),_.length>0&&z[null==(e=_[0])?void 0:e.id]&&(0,t.jsx)("span",{className:"text-blue-600",children:"Sorted by: Highest weighted score first"})]})]}):(0,t.jsx)(A.Zp,{children:(0,t.jsx)(A.Wu,{className:"flex flex-col items-center justify-center py-16",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(l.A,{className:"h-16 w-16 text-gray-300 mx-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Ready to Find Companies?"}),(0,t.jsx)("p",{className:"text-gray-500 max-w-md",children:"Enter keywords in the search box and press Enter for instant results, or use Smart Filtering for advanced weighted scoring."})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Quick search: Enter keywords and press Enter"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(c.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Advanced: Use Smart Filtering for lead scoring"})]})]})]})})})]}),(0,t.jsx)(k.av,{value:"lists",children:(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"My Lists functionality will be available in the List Management section."})})})]}),(0,t.jsx)(b.z,{open:h,onOpenChange:p,selectedCompanyIds:d,onSuccess:()=>{x([]),p(!1),console.log("Companies successfully added to list")}}),(0,t.jsx)(C.a,{isOpen:u,onOpenChange:j,criteria:i,onApplyFiltering:e=>{o(e),F(!0),U(!1),x([])},onClearFiltering:M,initialKeyword:s}),(0,t.jsx)(f.i,{company:N,open:L,onOpenChange:E})]})]})})},72620:(e,s,a)=>{Promise.resolve().then(a.bind(a,41245))}},e=>{e.O(0,[526,435,159,797,335,563,409,115,949,587,18,358],()=>e(e.s=72620)),_N_E=e.O()}]);